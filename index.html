<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#121212">
    <meta name="description" content="Tutor inteligente de matemÃ¡ticas con IA, teclado y grÃ¡ficas">
    <title>MatyMat-01 - Tu Tutor de MatemÃ¡ticas</title>
    <!-- CSS y Fuentes -->
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- GeoGebra para grÃ¡ficas -->
    <script src="https://www.geogebra.org/apps/deployggb.js"></script>
    <!-- Manifest y PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="tutor-avatar.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="MatyMat-01">
    <!-- Preload de Ã­cono -->
    <link rel="preload" href="tutor-avatar.png" as="image">
    <!-- Favicon -->
    <link rel="icon" href="tutor-avatar.png" type="image/png" sizes="192x192">
</head>
<body>
    <!-- Contenedor para efectos de confeti -->
    <div id="confettiContainer"></div>
    
    <div class="container">
        <header>
            <h1><i class="fas fa-robot"></i> MatyMat-01</h1>
            <p>Te ayudarÃ© a resolver ejercicios con texto, foto y apoyo emocional</p>
        </header>
        <div class="chat-container" id="chatContainer">
            <div class="message bot">
                <div class="avatar bot-avatar">
                    <img src="tutor-avatar.png" alt="Tutor MatyMat-01" class="tutor-img">
                </div>
                <div class="message-content">
                    Â¡Hola! Soy MatyMat-01, tu tutor virtual de matemÃ¡ticas.<br><br>
                    
                    <strong>Ãreas que enseÃ±o:</strong><br>
                    â€¢ ğŸ“Š Ãlgebra - Ecuaciones, polinomios, funciones<br>
                    â€¢ ğŸ“ TrigonometrÃ­a - TriÃ¡ngulos, funciones trigonomÃ©tricas<br>  
                    â€¢ ğŸ“ GeometrÃ­a - Formas, Ã¡reas, volÃºmenes, teoremas<br><br>
                    
                    <strong>Â¿CÃ³mo usar la app?</strong><br>
                    1. ğŸ“ Escribe tu pregunta matemÃ¡tica<br>
                    2. ğŸ“¸ Toma foto de ejercicios escritos<br>
                    3. ğŸ¯ Resuelve paso a paso con opciones<br>
                    4. â­ Gana estrellas por respuestas correctas<br>
                    5. ğŸ“ˆ Visualiza funciones con grÃ¡ficas interactivas<br><br>
                    
                    <strong>Ejemplos que puedes probar:</strong><br>
                    â€¢ Ãlgebra: "Resuelve 2x + 5 = 15" o "Factoriza xÂ² - 4"<br>
                    â€¢ TrigonometrÃ­a: "Calcula sen(30Â°)" o "Resuelve un triÃ¡ngulo rectÃ¡ngulo"<br>
                    â€¢ GeometrÃ­a: "Calcula el Ã¡rea de un cÃ­rculo de radio 5"<br><br>
                    
                    Â¡Escribe tu pregunta o elige un ejemplo para comenzar!
                </div>
            </div>
        </div>
        
        <!-- TECLADO MATEMÃTICO MODERNO (fijo, encima del input) -->
        <div class="math-toolbar" id="mathToolbar">
            <!-- Grip para arrastrar -->
            <div class="keyboard-grip" id="keyboardGrip">
                <div class="grip-line"></div>
            </div>
            
            <!-- BotÃ³n cerrar -->
            <button class="close-keyboard" id="closeKeyboard" title="Cerrar teclado">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Tabs de categorÃ­as -->
            <div class="keyboard-tabs" id="keyboardTabs">
                <button class="keyboard-tab active" data-tab="basic">BÃ¡sico</button>
                <button class="keyboard-tab" data-tab="advanced">Avanzado</button>
                <button class="keyboard-tab" data-tab="functions">Funciones</button>
                <button class="keyboard-tab" data-tab="calculus">CÃ¡lculo</button>
            </div>
            
            <!-- Contenido de teclado (se llena dinÃ¡micamente con JavaScript) -->
            <div class="keyboard-content" id="keyboardContent">
                <!-- Se generarÃ¡ dinÃ¡micamente -->
            </div>
        </div>
        
        <!-- Input de usuario (fijo abajo) -->
        <div class="input-section">
            <div class="input-wrapper">
                <button class="btn upload-btn" id="uploadBtn" title="Subir foto o tomar">
                    <i class="fas fa-camera-retro"></i>
                </button>
                <div class="math-input-container">
                    <textarea id="userInput" placeholder="Escribe tu pregunta o funciÃ³n..." rows="1"></textarea>
                </div>
                <button class="btn math-toggle-btn" id="toggleMathBtn" title="Teclado matemÃ¡tico">
                    <i class="fas fa-square-root-alt"></i>
                </button>
                <button class="btn send-btn" id="sendBtn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Input oculto para cÃ¡mara -->
    <input type="file" id="fileInput" accept="image/*" capture="environment" style="display: none;">
    
    <!-- MenÃº de ConfiguraciÃ³n -->
    <button id="menuToggle" class="btn menu-toggle" title="ConfiguraciÃ³n">
        <i class="fas fa-ellipsis-v"></i>
    </button>
    <div class="menu-panel" id="menuPanel">
        <div class="panel-header">
            <h3>âš™ï¸ ConfiguraciÃ³n</h3>
            <button id="closeMenu">Ã—</button>
        </div>
        <div class="panel-options">
            <div class="option" id="themeOption">
                <i class="fas fa-moon"></i>
                <span>Activar Modo Oscuro</span>
            </div>
            <div class="option" id="audioOption">
                <i class="fas fa-volume-up"></i>
                <span>Voz Activada</span>
            </div>
        </div>
    </div>
    
    <!-- Contenedor de grÃ¡fica con GeoGebra -->
    <div class="graph-container" id="graphContainer" style="display: none;">
        <div class="panel-header">
            <h3>ğŸ“ˆ GrÃ¡fica de FunciÃ³n</h3>
            <button onclick="cerrarGrafica()">Ã—</button>
        </div>
        <div class="graph-controls">
            <button onclick="zoomInGeoGebra()">ğŸ”+</button>
            <button onclick="zoomOutGeoGebra()">ğŸ”-</button>
            <button onclick="resetZoomGeoGebra()">â†º</button>
        </div>
        <div id="ggb-element" style="width: 100%; height: 400px;"></div>
        <div class="graph-actions">
            <button onclick="descargarGraficaGeoGebra()">ğŸ’¾ Guardar</button>
        </div>
    </div>
    
    <!-- Sistema de Opciones y Estrellas CON BOTÃ“N MINIMIZAR -->
    <div class="opciones-container" id="opcionesContainer" style="display: none;">
        <!-- BotÃ³n para minimizar/mostrar opciones -->
        <button class="minimizar-opciones" id="minimizarOpciones" title="Minimizar opciones">
            <i class="fas fa-chevron-down"></i>
        </button>
        
        <div class="opciones-header">
            <h4>ğŸ¯ Elige una opciÃ³n:</h4>
            <div class="estrellas-container">
                <span class="estrella">â­</span>
                <span id="contadorEstrellas">0</span>
            </div>
        </div>
        <div class="opciones-botones">
            <!-- Las opciones se generarÃ¡n dinÃ¡micamente con JavaScript -->
        </div>
    </div>

    <!-- Loading de estrellas -->
    <div id="loadingEstrella" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 1000;">
        <div class="estrella-loading" style="font-size: 3rem; animation: starWin 1s ease-in-out infinite;">â­</div>
        <p style="color: white; text-shadow: 0 0 5px black; font-weight: bold;">Â¡Ganaste una estrella!</p>
    </div>
    
    <script src="script.js"></script>
</body>
</html>

